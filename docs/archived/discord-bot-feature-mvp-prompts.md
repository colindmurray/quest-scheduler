---
created: 2026-01-25
lastUpdated: 2026-01-25
summary: "Prompt scaffold library for stepping through historical Discord MVP tasks."
category: REFERENCE
status: OBSOLETE
note: "Historical prompt artifact; no longer a recommended execution path for current plan-driven workflows."
changelog:
  - "2026-01-25: discord: add automation workflow and task runner skill"
---

> [!WARNING]
> This document is **obsolete/deprecated** and retained for historical context only. Do not use it to drive active implementation decisions.

# MVP Task Prompts (Tasks 1-62)

## Task 1: **Upgrade to Node.js 22**
```
You are implementing task #1 from docs/discord-bot-feature-design-tasks-list.md.
Task name: **Upgrade to Node.js 22**
Priority: P0
Dependencies: None

Design doc references:
- docs/discord-bot-feature-design-doc.md (re-read before coding)

Scope:
- Implement the task in the smallest reviewable change set.
- Follow AGENTS.md conventions.

Validation:
- Run the most relevant automated tests. If none exist, note that in the task's Notes.

Task list updates:
- Mark task #1 Status as [x] only after it is completed and validated.
- If any dependency or priority ordering changes are needed, update the task list and explain in Notes.

Research:
- If any Discord/Firebase/API details are unclear, do web research (official docs first), update the design doc accordingly, then proceed.

Commit:
- If this completes a milestone (typically a Section 1.x group), run tests and commit with message: "discord: <milestone summary>".
```

## Task 2: **Enable Blaze billing**
```
You are implementing task #2 from docs/discord-bot-feature-design-tasks-list.md.
Task name: **Enable Blaze billing**
Priority: P0
Dependencies: None

Design doc references:
- docs/discord-bot-feature-design-doc.md (re-read before coding)

Scope:
- Implement the task in the smallest reviewable change set.
- Follow AGENTS.md conventions.

Validation:
- Run the most relevant automated tests. If none exist, note that in the task's Notes.

Task list updates:
- Mark task #2 Status as [x] only after it is completed and validated.
- If any dependency or priority ordering changes are needed, update the task list and explain in Notes.

Research:
- If any Discord/Firebase/API details are unclear, do web research (official docs first), update the design doc accordingly, then proceed.

Commit:
- If this completes a milestone (typically a Section 1.x group), run tests and commit with message: "discord: <milestone summary>".
```

## Task 3: **Enable Cloud Tasks API**
```
You are implementing task #3 from docs/discord-bot-feature-design-tasks-list.md.
Task name: **Enable Cloud Tasks API**
Priority: P0
Dependencies: #2

Design doc references:
- docs/discord-bot-feature-design-doc.md (re-read before coding)

Scope:
- Implement the task in the smallest reviewable change set.
- Follow AGENTS.md conventions.

Validation:
- Run the most relevant automated tests. If none exist, note that in the task's Notes.

Task list updates:
- Mark task #3 Status as [x] only after it is completed and validated.
- If any dependency or priority ordering changes are needed, update the task list and explain in Notes.

Research:
- If any Discord/Firebase/API details are unclear, do web research (official docs first), update the design doc accordingly, then proceed.

Commit:
- If this completes a milestone (typically a Section 1.x group), run tests and commit with message: "discord: <milestone summary>".
```

## Task 4: **Create Cloud Tasks queue (region-aligned)**
```
You are implementing task #4 from docs/discord-bot-feature-design-tasks-list.md.
Task name: **Create Cloud Tasks queue (region-aligned)**
Priority: P0
Dependencies: #3

Design doc references:
- docs/discord-bot-feature-design-doc.md (re-read before coding)

Scope:
- Implement the task in the smallest reviewable change set.
- Follow AGENTS.md conventions.

Validation:
- Run the most relevant automated tests. If none exist, note that in the task's Notes.

Task list updates:
- Mark task #4 Status as [x] only after it is completed and validated.
- If any dependency or priority ordering changes are needed, update the task list and explain in Notes.

Research:
- If any Discord/Firebase/API details are unclear, do web research (official docs first), update the design doc accordingly, then proceed.

Commit:
- If this completes a milestone (typically a Section 1.x group), run tests and commit with message: "discord: <milestone summary>".
```

## Task 5: **Grant Cloud Tasks IAM**
```
You are implementing task #5 from docs/discord-bot-feature-design-tasks-list.md.
Task name: **Grant Cloud Tasks IAM**
Priority: P0
Dependencies: #4

Design doc references:
- docs/discord-bot-feature-design-doc.md (re-read before coding)

Scope:
- Implement the task in the smallest reviewable change set.
- Follow AGENTS.md conventions.

Validation:
- Run the most relevant automated tests. If none exist, note that in the task's Notes.

Task list updates:
- Mark task #5 Status as [x] only after it is completed and validated.
- If any dependency or priority ordering changes are needed, update the task list and explain in Notes.

Research:
- If any Discord/Firebase/API details are unclear, do web research (official docs first), update the design doc accordingly, then proceed.

Commit:
- If this completes a milestone (typically a Section 1.x group), run tests and commit with message: "discord: <milestone summary>".
```

## Task 6: **Install Discord dependencies**
```
You are implementing task #6 from docs/discord-bot-feature-design-tasks-list.md.
Task name: **Install Discord dependencies**
Priority: P0
Dependencies: #1

Design doc references:
- docs/discord-bot-feature-design-doc.md (re-read before coding)

Scope:
- Implement the task in the smallest reviewable change set.
- Follow AGENTS.md conventions.

Validation:
- Run the most relevant automated tests. If none exist, note that in the task's Notes.

Task list updates:
- Mark task #6 Status as [x] only after it is completed and validated.
- If any dependency or priority ordering changes are needed, update the task list and explain in Notes.

Research:
- If any Discord/Firebase/API details are unclear, do web research (official docs first), update the design doc accordingly, then proceed.

Commit:
- If this completes a milestone (typically a Section 1.x group), run tests and commit with message: "discord: <milestone summary>".
```

## Task 7: **Create Discord Application**
```
You are implementing task #7 from docs/discord-bot-feature-design-tasks-list.md.
Task name: **Create Discord Application**
Priority: P0
Dependencies: None

Design doc references:
- docs/discord-bot-feature-design-doc.md (re-read before coding)

Scope:
- Implement the task in the smallest reviewable change set.
- Follow AGENTS.md conventions.

Validation:
- Run the most relevant automated tests. If none exist, note that in the task's Notes.

Task list updates:
- Mark task #7 Status as [x] only after it is completed and validated.
- If any dependency or priority ordering changes are needed, update the task list and explain in Notes.

Research:
- If any Discord/Firebase/API details are unclear, do web research (official docs first), update the design doc accordingly, then proceed.

Commit:
- If this completes a milestone (typically a Section 1.x group), run tests and commit with message: "discord: <milestone summary>".
```

## Task 8: **Configure Discord secrets**
```
You are implementing task #8 from docs/discord-bot-feature-design-tasks-list.md.
Task name: **Configure Discord secrets**
Priority: P0
Dependencies: #7

Design doc references:
- docs/discord-bot-feature-design-doc.md (re-read before coding)

Scope:
- Implement the task in the smallest reviewable change set.
- Follow AGENTS.md conventions.

Validation:
- Run the most relevant automated tests. If none exist, note that in the task's Notes.

Task list updates:
- Mark task #8 Status as [x] only after it is completed and validated.
- If any dependency or priority ordering changes are needed, update the task list and explain in Notes.

Research:
- If any Discord/Firebase/API details are unclear, do web research (official docs first), update the design doc accordingly, then proceed.

Commit:
- If this completes a milestone (typically a Section 1.x group), run tests and commit with message: "discord: <milestone summary>".
```

## Task 9: **Split `functions/index.js`**
```
You are implementing task #9 from docs/discord-bot-feature-design-tasks-list.md.
Task name: **Split `functions/index.js`**
Priority: P0
Dependencies: None

Design doc references:
- docs/discord-bot-feature-design-doc.md (re-read before coding)

Scope:
- Implement the task in the smallest reviewable change set.
- Follow AGENTS.md conventions.

Validation:
- Run the most relevant automated tests. If none exist, note that in the task's Notes.

Task list updates:
- Mark task #9 Status as [x] only after it is completed and validated.
- If any dependency or priority ordering changes are needed, update the task list and explain in Notes.

Research:
- If any Discord/Firebase/API details are unclear, do web research (official docs first), update the design doc accordingly, then proceed.

Commit:
- If this completes a milestone (typically a Section 1.x group), run tests and commit with message: "discord: <milestone summary>".
```

## Task 10: **Set up Cloud Tasks queue retry policy**
```
You are implementing task #10 from docs/discord-bot-feature-design-tasks-list.md.
Task name: **Set up Cloud Tasks queue retry policy**
Priority: P0
Dependencies: #4

Design doc references:
- docs/discord-bot-feature-design-doc.md (re-read before coding)

Scope:
- Implement the task in the smallest reviewable change set.
- Follow AGENTS.md conventions.

Validation:
- Run the most relevant automated tests. If none exist, note that in the task's Notes.

Task list updates:
- Mark task #10 Status as [x] only after it is completed and validated.
- If any dependency or priority ordering changes are needed, update the task list and explain in Notes.

Research:
- If any Discord/Firebase/API details are unclear, do web research (official docs first), update the design doc accordingly, then proceed.

Commit:
- If this completes a milestone (typically a Section 1.x group), run tests and commit with message: "discord: <milestone summary>".
```

## Task 11: **Create ingress Cloud Function**
```
You are implementing task #11 from docs/discord-bot-feature-design-tasks-list.md.
Task name: **Create ingress Cloud Function**
Priority: P0
Dependencies: #6, #9

Design doc references:
- docs/discord-bot-feature-design-doc.md (re-read before coding)

Scope:
- Implement the task in the smallest reviewable change set.
- Follow AGENTS.md conventions.

Validation:
- Run the most relevant automated tests. If none exist, note that in the task's Notes.

Task list updates:
- Mark task #11 Status as [x] only after it is completed and validated.
- If any dependency or priority ordering changes are needed, update the task list and explain in Notes.

Research:
- If any Discord/Firebase/API details are unclear, do web research (official docs first), update the design doc accordingly, then proceed.

Commit:
- If this completes a milestone (typically a Section 1.x group), run tests and commit with message: "discord: <milestone summary>".
```

## Task 12: **Preserve raw body for signature verification**
```
You are implementing task #12 from docs/discord-bot-feature-design-tasks-list.md.
Task name: **Preserve raw body for signature verification**
Priority: P0
Dependencies: #11

Design doc references:
- docs/discord-bot-feature-design-doc.md (re-read before coding)

Scope:
- Implement the task in the smallest reviewable change set.
- Follow AGENTS.md conventions.

Validation:
- Run the most relevant automated tests. If none exist, note that in the task's Notes.

Task list updates:
- Mark task #12 Status as [x] only after it is completed and validated.
- If any dependency or priority ordering changes are needed, update the task list and explain in Notes.

Research:
- If any Discord/Firebase/API details are unclear, do web research (official docs first), update the design doc accordingly, then proceed.

Commit:
- If this completes a milestone (typically a Section 1.x group), run tests and commit with message: "discord: <milestone summary>".
```

## Task 13: **Implement signature verification**
```
You are implementing task #13 from docs/discord-bot-feature-design-tasks-list.md.
Task name: **Implement signature verification**
Priority: P0
Dependencies: #11, #8, #12

Design doc references:
- docs/discord-bot-feature-design-doc.md (re-read before coding)

Scope:
- Implement the task in the smallest reviewable change set.
- Follow AGENTS.md conventions.

Validation:
- Run the most relevant automated tests. If none exist, note that in the task's Notes.

Task list updates:
- Mark task #13 Status as [x] only after it is completed and validated.
- If any dependency or priority ordering changes are needed, update the task list and explain in Notes.

Research:
- If any Discord/Firebase/API details are unclear, do web research (official docs first), update the design doc accordingly, then proceed.

Commit:
- If this completes a milestone (typically a Section 1.x group), run tests and commit with message: "discord: <milestone summary>".
```

## Task 14: **Handle PING interaction**
```
You are implementing task #14 from docs/discord-bot-feature-design-tasks-list.md.
Task name: **Handle PING interaction**
Priority: P0
Dependencies: #13

Design doc references:
- docs/discord-bot-feature-design-doc.md (re-read before coding)

Scope:
- Implement the task in the smallest reviewable change set.
- Follow AGENTS.md conventions.

Validation:
- Run the most relevant automated tests. If none exist, note that in the task's Notes.

Task list updates:
- Mark task #14 Status as [x] only after it is completed and validated.
- If any dependency or priority ordering changes are needed, update the task list and explain in Notes.

Research:
- If any Discord/Firebase/API details are unclear, do web research (official docs first), update the design doc accordingly, then proceed.

Commit:
- If this completes a milestone (typically a Section 1.x group), run tests and commit with message: "discord: <milestone summary>".
```

## Task 15: **Implement deferred response**
```
You are implementing task #15 from docs/discord-bot-feature-design-tasks-list.md.
Task name: **Implement deferred response**
Priority: P0
Dependencies: #13

Design doc references:
- docs/discord-bot-feature-design-doc.md (re-read before coding)

Scope:
- Implement the task in the smallest reviewable change set.
- Follow AGENTS.md conventions.

Validation:
- Run the most relevant automated tests. If none exist, note that in the task's Notes.

Task list updates:
- Mark task #15 Status as [x] only after it is completed and validated.
- If any dependency or priority ordering changes are needed, update the task list and explain in Notes.

Research:
- If any Discord/Firebase/API details are unclear, do web research (official docs first), update the design doc accordingly, then proceed.

Commit:
- If this completes a milestone (typically a Section 1.x group), run tests and commit with message: "discord: <milestone summary>".
```

## Task 16: **Enqueue Cloud Task before response**
```
You are implementing task #16 from docs/discord-bot-feature-design-tasks-list.md.
Task name: **Enqueue Cloud Task before response**
Priority: P0
Dependencies: #10, #15

Design doc references:
- docs/discord-bot-feature-design-doc.md (re-read before coding)

Scope:
- Implement the task in the smallest reviewable change set.
- Follow AGENTS.md conventions.

Validation:
- Run the most relevant automated tests. If none exist, note that in the task's Notes.

Task list updates:
- Mark task #16 Status as [x] only after it is completed and validated.
- If any dependency or priority ordering changes are needed, update the task list and explain in Notes.

Research:
- If any Discord/Firebase/API details are unclear, do web research (official docs first), update the design doc accordingly, then proceed.

Commit:
- If this completes a milestone (typically a Section 1.x group), run tests and commit with message: "discord: <milestone summary>".
```

## Task 17: **Trim task payload**
```
You are implementing task #17 from docs/discord-bot-feature-design-tasks-list.md.
Task name: **Trim task payload**
Priority: P0
Dependencies: #16

Design doc references:
- docs/discord-bot-feature-design-doc.md (re-read before coding)

Scope:
- Implement the task in the smallest reviewable change set.
- Follow AGENTS.md conventions.

Validation:
- Run the most relevant automated tests. If none exist, note that in the task's Notes.

Task list updates:
- Mark task #17 Status as [x] only after it is completed and validated.
- If any dependency or priority ordering changes are needed, update the task list and explain in Notes.

Research:
- If any Discord/Firebase/API details are unclear, do web research (official docs first), update the design doc accordingly, then proceed.

Commit:
- If this completes a milestone (typically a Section 1.x group), run tests and commit with message: "discord: <milestone summary>".
```

## Task 18: **Register interactions endpoint URL**
```
You are implementing task #18 from docs/discord-bot-feature-design-tasks-list.md.
Task name: **Register interactions endpoint URL**
Priority: P0
Dependencies: #14, deploy

Design doc references:
- docs/discord-bot-feature-design-doc.md (re-read before coding)

Scope:
- Implement the task in the smallest reviewable change set.
- Follow AGENTS.md conventions.

Validation:
- Run the most relevant automated tests. If none exist, note that in the task's Notes.

Task list updates:
- Mark task #18 Status as [x] only after it is completed and validated.
- If any dependency or priority ordering changes are needed, update the task list and explain in Notes.

Research:
- If any Discord/Firebase/API details are unclear, do web research (official docs first), update the design doc accordingly, then proceed.

Commit:
- If this completes a milestone (typically a Section 1.x group), run tests and commit with message: "discord: <milestone summary>".
```

## Task 19: **Create worker task handler**
```
You are implementing task #19 from docs/discord-bot-feature-design-tasks-list.md.
Task name: **Create worker task handler**
Priority: P0
Dependencies: #9, #10

Design doc references:
- docs/discord-bot-feature-design-doc.md (re-read before coding)

Scope:
- Implement the task in the smallest reviewable change set.
- Follow AGENTS.md conventions.

Validation:
- Run the most relevant automated tests. If none exist, note that in the task's Notes.

Task list updates:
- Mark task #19 Status as [x] only after it is completed and validated.
- If any dependency or priority ordering changes are needed, update the task list and explain in Notes.

Research:
- If any Discord/Firebase/API details are unclear, do web research (official docs first), update the design doc accordingly, then proceed.

Commit:
- If this completes a milestone (typically a Section 1.x group), run tests and commit with message: "discord: <milestone summary>".
```

## Task 20: **Implement Discord API client**
```
You are implementing task #20 from docs/discord-bot-feature-design-tasks-list.md.
Task name: **Implement Discord API client**
Priority: P0
Dependencies: #6, #19

Design doc references:
- docs/discord-bot-feature-design-doc.md (re-read before coding)

Scope:
- Implement the task in the smallest reviewable change set.
- Follow AGENTS.md conventions.

Validation:
- Run the most relevant automated tests. If none exist, note that in the task's Notes.

Task list updates:
- Mark task #20 Status as [x] only after it is completed and validated.
- If any dependency or priority ordering changes are needed, update the task list and explain in Notes.

Research:
- If any Discord/Firebase/API details are unclear, do web research (official docs first), update the design doc accordingly, then proceed.

Commit:
- If this completes a milestone (typically a Section 1.x group), run tests and commit with message: "discord: <milestone summary>".
```

## Task 21: **Route interactions by type/custom_id**
```
You are implementing task #21 from docs/discord-bot-feature-design-tasks-list.md.
Task name: **Route interactions by type/custom_id**
Priority: P0
Dependencies: #19

Design doc references:
- docs/discord-bot-feature-design-doc.md (re-read before coding)

Scope:
- Implement the task in the smallest reviewable change set.
- Follow AGENTS.md conventions.

Validation:
- Run the most relevant automated tests. If none exist, note that in the task's Notes.

Task list updates:
- Mark task #21 Status as [x] only after it is completed and validated.
- If any dependency or priority ordering changes are needed, update the task list and explain in Notes.

Research:
- If any Discord/Firebase/API details are unclear, do web research (official docs first), update the design doc accordingly, then proceed.

Commit:
- If this completes a milestone (typically a Section 1.x group), run tests and commit with message: "discord: <milestone summary>".
```

## Task 22: **Create Discord OAuth start endpoint**
```
You are implementing task #22 from docs/discord-bot-feature-design-tasks-list.md.
Task name: **Create Discord OAuth start endpoint**
Priority: P0
Dependencies: #8

Design doc references:
- docs/discord-bot-feature-design-doc.md (re-read before coding)

Scope:
- Implement the task in the smallest reviewable change set.
- Follow AGENTS.md conventions.

Validation:
- Run the most relevant automated tests. If none exist, note that in the task's Notes.

Task list updates:
- Mark task #22 Status as [x] only after it is completed and validated.
- If any dependency or priority ordering changes are needed, update the task list and explain in Notes.

Research:
- If any Discord/Firebase/API details are unclear, do web research (official docs first), update the design doc accordingly, then proceed.

Commit:
- If this completes a milestone (typically a Section 1.x group), run tests and commit with message: "discord: <milestone summary>".
```

## Task 23: **Register OAuth redirect URI**
```
You are implementing task #23 from docs/discord-bot-feature-design-tasks-list.md.
Task name: **Register OAuth redirect URI**
Priority: P0
Dependencies: #7

Design doc references:
- docs/discord-bot-feature-design-doc.md (re-read before coding)

Scope:
- Implement the task in the smallest reviewable change set.
- Follow AGENTS.md conventions.

Validation:
- Run the most relevant automated tests. If none exist, note that in the task's Notes.

Task list updates:
- Mark task #23 Status as [x] only after it is completed and validated.
- If any dependency or priority ordering changes are needed, update the task list and explain in Notes.

Research:
- If any Discord/Firebase/API details are unclear, do web research (official docs first), update the design doc accordingly, then proceed.

Commit:
- If this completes a milestone (typically a Section 1.x group), run tests and commit with message: "discord: <milestone summary>".
```

## Task 24: **Create Discord OAuth callback**
```
You are implementing task #24 from docs/discord-bot-feature-design-tasks-list.md.
Task name: **Create Discord OAuth callback**
Priority: P0
Dependencies: #22, #23

Design doc references:
- docs/discord-bot-feature-design-doc.md (re-read before coding)

Scope:
- Implement the task in the smallest reviewable change set.
- Follow AGENTS.md conventions.

Validation:
- Run the most relevant automated tests. If none exist, note that in the task's Notes.

Task list updates:
- Mark task #24 Status as [x] only after it is completed and validated.
- If any dependency or priority ordering changes are needed, update the task list and explain in Notes.

Research:
- If any Discord/Firebase/API details are unclear, do web research (official docs first), update the design doc accordingly, then proceed.

Commit:
- If this completes a milestone (typically a Section 1.x group), run tests and commit with message: "discord: <milestone summary>".
```

## Task 25: **Create `discordUserLinks` collection**
```
You are implementing task #25 from docs/discord-bot-feature-design-tasks-list.md.
Task name: **Create `discordUserLinks` collection**
Priority: P0
Dependencies: #24

Design doc references:
- docs/discord-bot-feature-design-doc.md (re-read before coding)

Scope:
- Implement the task in the smallest reviewable change set.
- Follow AGENTS.md conventions.

Validation:
- Run the most relevant automated tests. If none exist, note that in the task's Notes.

Task list updates:
- Mark task #25 Status as [x] only after it is completed and validated.
- If any dependency or priority ordering changes are needed, update the task list and explain in Notes.

Research:
- If any Discord/Firebase/API details are unclear, do web research (official docs first), update the design doc accordingly, then proceed.

Commit:
- If this completes a milestone (typically a Section 1.x group), run tests and commit with message: "discord: <milestone summary>".
```

## Task 26: **Update `users/{uid}` with discord info**
```
You are implementing task #26 from docs/discord-bot-feature-design-tasks-list.md.
Task name: **Update `users/{uid}` with discord info**
Priority: P0
Dependencies: #24

Design doc references:
- docs/discord-bot-feature-design-doc.md (re-read before coding)

Scope:
- Implement the task in the smallest reviewable change set.
- Follow AGENTS.md conventions.

Validation:
- Run the most relevant automated tests. If none exist, note that in the task's Notes.

Task list updates:
- Mark task #26 Status as [x] only after it is completed and validated.
- If any dependency or priority ordering changes are needed, update the task list and explain in Notes.

Research:
- If any Discord/Firebase/API details are unclear, do web research (official docs first), update the design doc accordingly, then proceed.

Commit:
- If this completes a milestone (typically a Section 1.x group), run tests and commit with message: "discord: <milestone summary>".
```

## Task 27: **Store or discard Discord tokens securely**
```
You are implementing task #27 from docs/discord-bot-feature-design-tasks-list.md.
Task name: **Store or discard Discord tokens securely**
Priority: P0
Dependencies: #24

Design doc references:
- docs/discord-bot-feature-design-doc.md (re-read before coding)

Scope:
- Implement the task in the smallest reviewable change set.
- Follow AGENTS.md conventions.

Validation:
- Run the most relevant automated tests. If none exist, note that in the task's Notes.

Task list updates:
- Mark task #27 Status as [x] only after it is completed and validated.
- If any dependency or priority ordering changes are needed, update the task list and explain in Notes.

Research:
- If any Discord/Firebase/API details are unclear, do web research (official docs first), update the design doc accordingly, then proceed.

Commit:
- If this completes a milestone (typically a Section 1.x group), run tests and commit with message: "discord: <milestone summary>".
```

## Task 28: **Add Firestore rules for discord collections**
```
You are implementing task #28 from docs/discord-bot-feature-design-tasks-list.md.
Task name: **Add Firestore rules for discord collections**
Priority: P0
Dependencies: #25

Design doc references:
- docs/discord-bot-feature-design-doc.md (re-read before coding)

Scope:
- Implement the task in the smallest reviewable change set.
- Follow AGENTS.md conventions.

Validation:
- Run the most relevant automated tests. If none exist, note that in the task's Notes.

Task list updates:
- Mark task #28 Status as [x] only after it is completed and validated.
- If any dependency or priority ordering changes are needed, update the task list and explain in Notes.

Research:
- If any Discord/Firebase/API details are unclear, do web research (official docs first), update the design doc accordingly, then proceed.

Commit:
- If this completes a milestone (typically a Section 1.x group), run tests and commit with message: "discord: <milestone summary>".
```

## Task 29: **Add "Link Discord" UI in Settings**
```
You are implementing task #29 from docs/discord-bot-feature-design-tasks-list.md.
Task name: **Add "Link Discord" UI in Settings**
Priority: P0
Dependencies: #22, #24

Design doc references:
- docs/discord-bot-feature-design-doc.md (re-read before coding)

Scope:
- Implement the task in the smallest reviewable change set.
- Follow AGENTS.md conventions.

Validation:
- Run the most relevant automated tests. If none exist, note that in the task's Notes.

Task list updates:
- Mark task #29 Status as [x] only after it is completed and validated.
- If any dependency or priority ordering changes are needed, update the task list and explain in Notes.

Research:
- If any Discord/Firebase/API details are unclear, do web research (official docs first), update the design doc accordingly, then proceed.

Commit:
- If this completes a milestone (typically a Section 1.x group), run tests and commit with message: "discord: <milestone summary>".
```

## Task 30: **Create link code generation endpoint**
```
You are implementing task #30 from docs/discord-bot-feature-design-tasks-list.md.
Task name: **Create link code generation endpoint**
Priority: P0
Dependencies: #9

Design doc references:
- docs/discord-bot-feature-design-doc.md (re-read before coding)

Scope:
- Implement the task in the smallest reviewable change set.
- Follow AGENTS.md conventions.

Validation:
- Run the most relevant automated tests. If none exist, note that in the task's Notes.

Task list updates:
- Mark task #30 Status as [x] only after it is completed and validated.
- If any dependency or priority ordering changes are needed, update the task list and explain in Notes.

Research:
- If any Discord/Firebase/API details are unclear, do web research (official docs first), update the design doc accordingly, then proceed.

Commit:
- If this completes a milestone (typically a Section 1.x group), run tests and commit with message: "discord: <milestone summary>".
```

## Task 31: **Register `/qs link-group` slash command**
```
You are implementing task #31 from docs/discord-bot-feature-design-tasks-list.md.
Task name: **Register `/qs link-group` slash command**
Priority: P0
Dependencies: #7

Design doc references:
- docs/discord-bot-feature-design-doc.md (re-read before coding)

Scope:
- Implement the task in the smallest reviewable change set.
- Follow AGENTS.md conventions.

Validation:
- Run the most relevant automated tests. If none exist, note that in the task's Notes.

Task list updates:
- Mark task #31 Status as [x] only after it is completed and validated.
- If any dependency or priority ordering changes are needed, update the task list and explain in Notes.

Research:
- If any Discord/Firebase/API details are unclear, do web research (official docs first), update the design doc accordingly, then proceed.

Commit:
- If this completes a milestone (typically a Section 1.x group), run tests and commit with message: "discord: <milestone summary>".
```

## Task 32: **Set `default_member_permissions`**
```
You are implementing task #32 from docs/discord-bot-feature-design-tasks-list.md.
Task name: **Set `default_member_permissions`**
Priority: P0
Dependencies: #31

Design doc references:
- docs/discord-bot-feature-design-doc.md (re-read before coding)

Scope:
- Implement the task in the smallest reviewable change set.
- Follow AGENTS.md conventions.

Validation:
- Run the most relevant automated tests. If none exist, note that in the task's Notes.

Task list updates:
- Mark task #32 Status as [x] only after it is completed and validated.
- If any dependency or priority ordering changes are needed, update the task list and explain in Notes.

Research:
- If any Discord/Firebase/API details are unclear, do web research (official docs first), update the design doc accordingly, then proceed.

Commit:
- If this completes a milestone (typically a Section 1.x group), run tests and commit with message: "discord: <milestone summary>".
```

## Task 33: **Implement link-group handler in worker**
```
You are implementing task #33 from docs/discord-bot-feature-design-tasks-list.md.
Task name: **Implement link-group handler in worker**
Priority: P0
Dependencies: #19, #30

Design doc references:
- docs/discord-bot-feature-design-doc.md (re-read before coding)

Scope:
- Implement the task in the smallest reviewable change set.
- Follow AGENTS.md conventions.

Validation:
- Run the most relevant automated tests. If none exist, note that in the task's Notes.

Task list updates:
- Mark task #33 Status as [x] only after it is completed and validated.
- If any dependency or priority ordering changes are needed, update the task list and explain in Notes.

Research:
- If any Discord/Firebase/API details are unclear, do web research (official docs first), update the design doc accordingly, then proceed.

Commit:
- If this completes a milestone (typically a Section 1.x group), run tests and commit with message: "discord: <milestone summary>".
```

## Task 34: **Add "Connect Discord" UI in Group Settings**
```
You are implementing task #34 from docs/discord-bot-feature-design-tasks-list.md.
Task name: **Add "Connect Discord" UI in Group Settings**
Priority: P0
Dependencies: #30

Design doc references:
- docs/discord-bot-feature-design-doc.md (re-read before coding)

Scope:
- Implement the task in the smallest reviewable change set.
- Follow AGENTS.md conventions.

Validation:
- Run the most relevant automated tests. If none exist, note that in the task's Notes.

Task list updates:
- Mark task #34 Status as [x] only after it is completed and validated.
- If any dependency or priority ordering changes are needed, update the task list and explain in Notes.

Research:
- If any Discord/Firebase/API details are unclear, do web research (official docs first), update the design doc accordingly, then proceed.

Commit:
- If this completes a milestone (typically a Section 1.x group), run tests and commit with message: "discord: <milestone summary>".
```

## Task 35: **Create Firestore trigger for scheduler creation**
```
You are implementing task #35 from docs/discord-bot-feature-design-tasks-list.md.
Task name: **Create Firestore trigger for scheduler creation**
Priority: P0
Dependencies: #9

Design doc references:
- docs/discord-bot-feature-design-doc.md (re-read before coding)

Scope:
- Implement the task in the smallest reviewable change set.
- Follow AGENTS.md conventions.

Validation:
- Run the most relevant automated tests. If none exist, note that in the task's Notes.

Task list updates:
- Mark task #35 Status as [x] only after it is completed and validated.
- If any dependency or priority ordering changes are needed, update the task list and explain in Notes.

Research:
- If any Discord/Firebase/API details are unclear, do web research (official docs first), update the design doc accordingly, then proceed.

Commit:
- If this completes a milestone (typically a Section 1.x group), run tests and commit with message: "discord: <milestone summary>".
```

## Task 36: **Implement poll card message builder**
```
You are implementing task #36 from docs/discord-bot-feature-design-tasks-list.md.
Task name: **Implement poll card message builder**
Priority: P0
Dependencies: #20

Design doc references:
- docs/discord-bot-feature-design-doc.md (re-read before coding)

Scope:
- Implement the task in the smallest reviewable change set.
- Follow AGENTS.md conventions.

Validation:
- Run the most relevant automated tests. If none exist, note that in the task's Notes.

Task list updates:
- Mark task #36 Status as [x] only after it is completed and validated.
- If any dependency or priority ordering changes are needed, update the task list and explain in Notes.

Research:
- If any Discord/Firebase/API details are unclear, do web research (official docs first), update the design doc accordingly, then proceed.

Commit:
- If this completes a milestone (typically a Section 1.x group), run tests and commit with message: "discord: <milestone summary>".
```

## Task 37: **Add "Vote" button to poll card**
```
You are implementing task #37 from docs/discord-bot-feature-design-tasks-list.md.
Task name: **Add "Vote" button to poll card**
Priority: P0
Dependencies: #36

Design doc references:
- docs/discord-bot-feature-design-doc.md (re-read before coding)

Scope:
- Implement the task in the smallest reviewable change set.
- Follow AGENTS.md conventions.

Validation:
- Run the most relevant automated tests. If none exist, note that in the task's Notes.

Task list updates:
- Mark task #37 Status as [x] only after it is completed and validated.
- If any dependency or priority ordering changes are needed, update the task list and explain in Notes.

Research:
- If any Discord/Firebase/API details are unclear, do web research (official docs first), update the design doc accordingly, then proceed.

Commit:
- If this completes a milestone (typically a Section 1.x group), run tests and commit with message: "discord: <milestone summary>".
```

## Task 38: **Post poll card via Discord API**
```
You are implementing task #38 from docs/discord-bot-feature-design-tasks-list.md.
Task name: **Post poll card via Discord API**
Priority: P0
Dependencies: #36, #37

Design doc references:
- docs/discord-bot-feature-design-doc.md (re-read before coding)

Scope:
- Implement the task in the smallest reviewable change set.
- Follow AGENTS.md conventions.

Validation:
- Run the most relevant automated tests. If none exist, note that in the task's Notes.

Task list updates:
- Mark task #38 Status as [x] only after it is completed and validated.
- If any dependency or priority ordering changes are needed, update the task list and explain in Notes.

Research:
- If any Discord/Firebase/API details are unclear, do web research (official docs first), update the design doc accordingly, then proceed.

Commit:
- If this completes a milestone (typically a Section 1.x group), run tests and commit with message: "discord: <milestone summary>".
```

## Task 39: **Implement "Vote" button handler**
```
You are implementing task #39 from docs/discord-bot-feature-design-tasks-list.md.
Task name: **Implement "Vote" button handler**
Priority: P0
Dependencies: #21

Design doc references:
- docs/discord-bot-feature-design-doc.md (re-read before coding)

Scope:
- Implement the task in the smallest reviewable change set.
- Follow AGENTS.md conventions.

Validation:
- Run the most relevant automated tests. If none exist, note that in the task's Notes.

Task list updates:
- Mark task #39 Status as [x] only after it is completed and validated.
- If any dependency or priority ordering changes are needed, update the task list and explain in Notes.

Research:
- If any Discord/Firebase/API details are unclear, do web research (official docs first), update the design doc accordingly, then proceed.

Commit:
- If this completes a milestone (typically a Section 1.x group), run tests and commit with message: "discord: <milestone summary>".
```

## Task 40: **Build voting UI components**
```
You are implementing task #40 from docs/discord-bot-feature-design-tasks-list.md.
Task name: **Build voting UI components**
Priority: P0
Dependencies: #39

Design doc references:
- docs/discord-bot-feature-design-doc.md (re-read before coding)

Scope:
- Implement the task in the smallest reviewable change set.
- Follow AGENTS.md conventions.

Validation:
- Run the most relevant automated tests. If none exist, note that in the task's Notes.

Task list updates:
- Mark task #40 Status as [x] only after it is completed and validated.
- If any dependency or priority ordering changes are needed, update the task list and explain in Notes.

Research:
- If any Discord/Firebase/API details are unclear, do web research (official docs first), update the design doc accordingly, then proceed.

Commit:
- If this completes a milestone (typically a Section 1.x group), run tests and commit with message: "discord: <milestone summary>".
```

## Task 41: **Handle select menu interactions**
```
You are implementing task #41 from docs/discord-bot-feature-design-tasks-list.md.
Task name: **Handle select menu interactions**
Priority: P0
Dependencies: #40

Design doc references:
- docs/discord-bot-feature-design-doc.md (re-read before coding)

Scope:
- Implement the task in the smallest reviewable change set.
- Follow AGENTS.md conventions.

Validation:
- Run the most relevant automated tests. If none exist, note that in the task's Notes.

Task list updates:
- Mark task #41 Status as [x] only after it is completed and validated.
- If any dependency or priority ordering changes are needed, update the task list and explain in Notes.

Research:
- If any Discord/Firebase/API details are unclear, do web research (official docs first), update the design doc accordingly, then proceed.

Commit:
- If this completes a milestone (typically a Section 1.x group), run tests and commit with message: "discord: <milestone summary>".
```

## Task 42: **Persist pagination state**
```
You are implementing task #42 from docs/discord-bot-feature-design-tasks-list.md.
Task name: **Persist pagination state**
Priority: P0
Dependencies: #41

Design doc references:
- docs/discord-bot-feature-design-doc.md (re-read before coding)

Scope:
- Implement the task in the smallest reviewable change set.
- Follow AGENTS.md conventions.

Validation:
- Run the most relevant automated tests. If none exist, note that in the task's Notes.

Task list updates:
- Mark task #42 Status as [x] only after it is completed and validated.
- If any dependency or priority ordering changes are needed, update the task list and explain in Notes.

Research:
- If any Discord/Firebase/API details are unclear, do web research (official docs first), update the design doc accordingly, then proceed.

Commit:
- If this completes a milestone (typically a Section 1.x group), run tests and commit with message: "discord: <milestone summary>".
```

## Task 43: **Add Submit button**
```
You are implementing task #43 from docs/discord-bot-feature-design-tasks-list.md.
Task name: **Add Submit button**
Priority: P0
Dependencies: #40

Design doc references:
- docs/discord-bot-feature-design-doc.md (re-read before coding)

Scope:
- Implement the task in the smallest reviewable change set.
- Follow AGENTS.md conventions.

Validation:
- Run the most relevant automated tests. If none exist, note that in the task's Notes.

Task list updates:
- Mark task #43 Status as [x] only after it is completed and validated.
- If any dependency or priority ordering changes are needed, update the task list and explain in Notes.

Research:
- If any Discord/Firebase/API details are unclear, do web research (official docs first), update the design doc accordingly, then proceed.

Commit:
- If this completes a milestone (typically a Section 1.x group), run tests and commit with message: "discord: <milestone summary>".
```

## Task 44: **Edit deferred response with voting UI**
```
You are implementing task #44 from docs/discord-bot-feature-design-tasks-list.md.
Task name: **Edit deferred response with voting UI**
Priority: P0
Dependencies: #40, #43

Design doc references:
- docs/discord-bot-feature-design-doc.md (re-read before coding)

Scope:
- Implement the task in the smallest reviewable change set.
- Follow AGENTS.md conventions.

Validation:
- Run the most relevant automated tests. If none exist, note that in the task's Notes.

Task list updates:
- Mark task #44 Status as [x] only after it is completed and validated.
- If any dependency or priority ordering changes are needed, update the task list and explain in Notes.

Research:
- If any Discord/Firebase/API details are unclear, do web research (official docs first), update the design doc accordingly, then proceed.

Commit:
- If this completes a milestone (typically a Section 1.x group), run tests and commit with message: "discord: <milestone summary>".
```

## Task 45: **Implement submit handler**
```
You are implementing task #45 from docs/discord-bot-feature-design-tasks-list.md.
Task name: **Implement submit handler**
Priority: P0
Dependencies: #21

Design doc references:
- docs/discord-bot-feature-design-doc.md (re-read before coding)

Scope:
- Implement the task in the smallest reviewable change set.
- Follow AGENTS.md conventions.

Validation:
- Run the most relevant automated tests. If none exist, note that in the task's Notes.

Task list updates:
- Mark task #45 Status as [x] only after it is completed and validated.
- If any dependency or priority ordering changes are needed, update the task list and explain in Notes.

Research:
- If any Discord/Firebase/API details are unclear, do web research (official docs first), update the design doc accordingly, then proceed.

Commit:
- If this completes a milestone (typically a Section 1.x group), run tests and commit with message: "discord: <milestone summary>".
```

## Task 46: **Load persisted selections**
```
You are implementing task #46 from docs/discord-bot-feature-design-tasks-list.md.
Task name: **Load persisted selections**
Priority: P0
Dependencies: #45, #42

Design doc references:
- docs/discord-bot-feature-design-doc.md (re-read before coding)

Scope:
- Implement the task in the smallest reviewable change set.
- Follow AGENTS.md conventions.

Validation:
- Run the most relevant automated tests. If none exist, note that in the task's Notes.

Task list updates:
- Mark task #46 Status as [x] only after it is completed and validated.
- If any dependency or priority ordering changes are needed, update the task list and explain in Notes.

Research:
- If any Discord/Firebase/API details are unclear, do web research (official docs first), update the design doc accordingly, then proceed.

Commit:
- If this completes a milestone (typically a Section 1.x group), run tests and commit with message: "discord: <milestone summary>".
```

## Task 47: **Validate vote data**
```
You are implementing task #47 from docs/discord-bot-feature-design-tasks-list.md.
Task name: **Validate vote data**
Priority: P0
Dependencies: #45

Design doc references:
- docs/discord-bot-feature-design-doc.md (re-read before coding)

Scope:
- Implement the task in the smallest reviewable change set.
- Follow AGENTS.md conventions.

Validation:
- Run the most relevant automated tests. If none exist, note that in the task's Notes.

Task list updates:
- Mark task #47 Status as [x] only after it is completed and validated.
- If any dependency or priority ordering changes are needed, update the task list and explain in Notes.

Research:
- If any Discord/Firebase/API details are unclear, do web research (official docs first), update the design doc accordingly, then proceed.

Commit:
- If this completes a milestone (typically a Section 1.x group), run tests and commit with message: "discord: <milestone summary>".
```

## Task 48: **Enforce Preferred => Feasible rule**
```
You are implementing task #48 from docs/discord-bot-feature-design-tasks-list.md.
Task name: **Enforce Preferred => Feasible rule**
Priority: P0
Dependencies: #47

Design doc references:
- docs/discord-bot-feature-design-doc.md (re-read before coding)

Scope:
- Implement the task in the smallest reviewable change set.
- Follow AGENTS.md conventions.

Validation:
- Run the most relevant automated tests. If none exist, note that in the task's Notes.

Task list updates:
- Mark task #48 Status as [x] only after it is completed and validated.
- If any dependency or priority ordering changes are needed, update the task list and explain in Notes.

Research:
- If any Discord/Firebase/API details are unclear, do web research (official docs first), update the design doc accordingly, then proceed.

Commit:
- If this completes a milestone (typically a Section 1.x group), run tests and commit with message: "discord: <milestone summary>".
```

## Task 49: **Write votes to Firestore**
```
You are implementing task #49 from docs/discord-bot-feature-design-tasks-list.md.
Task name: **Write votes to Firestore**
Priority: P0
Dependencies: #48

Design doc references:
- docs/discord-bot-feature-design-doc.md (re-read before coding)

Scope:
- Implement the task in the smallest reviewable change set.
- Follow AGENTS.md conventions.

Validation:
- Run the most relevant automated tests. If none exist, note that in the task's Notes.

Task list updates:
- Mark task #49 Status as [x] only after it is completed and validated.
- If any dependency or priority ordering changes are needed, update the task list and explain in Notes.

Research:
- If any Discord/Firebase/API details are unclear, do web research (official docs first), update the design doc accordingly, then proceed.

Commit:
- If this completes a milestone (typically a Section 1.x group), run tests and commit with message: "discord: <milestone summary>".
```

## Task 50: **Confirm vote submission**
```
You are implementing task #50 from docs/discord-bot-feature-design-tasks-list.md.
Task name: **Confirm vote submission**
Priority: P0
Dependencies: #49

Design doc references:
- docs/discord-bot-feature-design-doc.md (re-read before coding)

Scope:
- Implement the task in the smallest reviewable change set.
- Follow AGENTS.md conventions.

Validation:
- Run the most relevant automated tests. If none exist, note that in the task's Notes.

Task list updates:
- Mark task #50 Status as [x] only after it is completed and validated.
- If any dependency or priority ordering changes are needed, update the task list and explain in Notes.

Research:
- If any Discord/Firebase/API details are unclear, do web research (official docs first), update the design doc accordingly, then proceed.

Commit:
- If this completes a milestone (typically a Section 1.x group), run tests and commit with message: "discord: <milestone summary>".
```

## Task 51: **Create Firestore trigger for scheduler updates**
```
You are implementing task #51 from docs/discord-bot-feature-design-tasks-list.md.
Task name: **Create Firestore trigger for scheduler updates**
Priority: P0
Dependencies: #9

Design doc references:
- docs/discord-bot-feature-design-doc.md (re-read before coding)

Scope:
- Implement the task in the smallest reviewable change set.
- Follow AGENTS.md conventions.

Validation:
- Run the most relevant automated tests. If none exist, note that in the task's Notes.

Task list updates:
- Mark task #51 Status as [x] only after it is completed and validated.
- If any dependency or priority ordering changes are needed, update the task list and explain in Notes.

Research:
- If any Discord/Firebase/API details are unclear, do web research (official docs first), update the design doc accordingly, then proceed.

Commit:
- If this completes a milestone (typically a Section 1.x group), run tests and commit with message: "discord: <milestone summary>".
```

## Task 52: **Update poll card on changes**
```
You are implementing task #52 from docs/discord-bot-feature-design-tasks-list.md.
Task name: **Update poll card on changes**
Priority: P0
Dependencies: #51, #36

Design doc references:
- docs/discord-bot-feature-design-doc.md (re-read before coding)

Scope:
- Implement the task in the smallest reviewable change set.
- Follow AGENTS.md conventions.

Validation:
- Run the most relevant automated tests. If none exist, note that in the task's Notes.

Task list updates:
- Mark task #52 Status as [x] only after it is completed and validated.
- If any dependency or priority ordering changes are needed, update the task list and explain in Notes.

Research:
- If any Discord/Firebase/API details are unclear, do web research (official docs first), update the design doc accordingly, then proceed.

Commit:
- If this completes a milestone (typically a Section 1.x group), run tests and commit with message: "discord: <milestone summary>".
```

## Task 53: **Handle poll finalization**
```
You are implementing task #53 from docs/discord-bot-feature-design-tasks-list.md.
Task name: **Handle poll finalization**
Priority: P0
Dependencies: #52

Design doc references:
- docs/discord-bot-feature-design-doc.md (re-read before coding)

Scope:
- Implement the task in the smallest reviewable change set.
- Follow AGENTS.md conventions.

Validation:
- Run the most relevant automated tests. If none exist, note that in the task's Notes.

Task list updates:
- Mark task #53 Status as [x] only after it is completed and validated.
- If any dependency or priority ordering changes are needed, update the task list and explain in Notes.

Research:
- If any Discord/Firebase/API details are unclear, do web research (official docs first), update the design doc accordingly, then proceed.

Commit:
- If this completes a milestone (typically a Section 1.x group), run tests and commit with message: "discord: <milestone summary>".
```

## Task 54: **Handle unlinked user error**
```
You are implementing task #54 from docs/discord-bot-feature-design-tasks-list.md.
Task name: **Handle unlinked user error**
Priority: P0
Dependencies: #39

Design doc references:
- docs/discord-bot-feature-design-doc.md (re-read before coding)

Scope:
- Implement the task in the smallest reviewable change set.
- Follow AGENTS.md conventions.

Validation:
- Run the most relevant automated tests. If none exist, note that in the task's Notes.

Task list updates:
- Mark task #54 Status as [x] only after it is completed and validated.
- If any dependency or priority ordering changes are needed, update the task list and explain in Notes.

Research:
- If any Discord/Firebase/API details are unclear, do web research (official docs first), update the design doc accordingly, then proceed.

Commit:
- If this completes a milestone (typically a Section 1.x group), run tests and commit with message: "discord: <milestone summary>".
```

## Task 55: **Handle poll not found error**
```
You are implementing task #55 from docs/discord-bot-feature-design-tasks-list.md.
Task name: **Handle poll not found error**
Priority: P0
Dependencies: #39

Design doc references:
- docs/discord-bot-feature-design-doc.md (re-read before coding)

Scope:
- Implement the task in the smallest reviewable change set.
- Follow AGENTS.md conventions.

Validation:
- Run the most relevant automated tests. If none exist, note that in the task's Notes.

Task list updates:
- Mark task #55 Status as [x] only after it is completed and validated.
- If any dependency or priority ordering changes are needed, update the task list and explain in Notes.

Research:
- If any Discord/Firebase/API details are unclear, do web research (official docs first), update the design doc accordingly, then proceed.

Commit:
- If this completes a milestone (typically a Section 1.x group), run tests and commit with message: "discord: <milestone summary>".
```

## Task 56: **Handle generic errors**
```
You are implementing task #56 from docs/discord-bot-feature-design-tasks-list.md.
Task name: **Handle generic errors**
Priority: P0
Dependencies: #19

Design doc references:
- docs/discord-bot-feature-design-doc.md (re-read before coding)

Scope:
- Implement the task in the smallest reviewable change set.
- Follow AGENTS.md conventions.

Validation:
- Run the most relevant automated tests. If none exist, note that in the task's Notes.

Task list updates:
- Mark task #56 Status as [x] only after it is completed and validated.
- If any dependency or priority ordering changes are needed, update the task list and explain in Notes.

Research:
- If any Discord/Firebase/API details are unclear, do web research (official docs first), update the design doc accordingly, then proceed.

Commit:
- If this completes a milestone (typically a Section 1.x group), run tests and commit with message: "discord: <milestone summary>".
```

## Task 57: **Validate `application_id` on interactions**
```
You are implementing task #57 from docs/discord-bot-feature-design-tasks-list.md.
Task name: **Validate `application_id` on interactions**
Priority: P0
Dependencies: #13

Design doc references:
- docs/discord-bot-feature-design-doc.md (re-read before coding)

Scope:
- Implement the task in the smallest reviewable change set.
- Follow AGENTS.md conventions.

Validation:
- Run the most relevant automated tests. If none exist, note that in the task's Notes.

Task list updates:
- Mark task #57 Status as [x] only after it is completed and validated.
- If any dependency or priority ordering changes are needed, update the task list and explain in Notes.

Research:
- If any Discord/Firebase/API details are unclear, do web research (official docs first), update the design doc accordingly, then proceed.

Commit:
- If this completes a milestone (typically a Section 1.x group), run tests and commit with message: "discord: <milestone summary>".
```

## Task 58: **Validate guild/channel matches linked group**
```
You are implementing task #58 from docs/discord-bot-feature-design-tasks-list.md.
Task name: **Validate guild/channel matches linked group**
Priority: P0
Dependencies: #39

Design doc references:
- docs/discord-bot-feature-design-doc.md (re-read before coding)

Scope:
- Implement the task in the smallest reviewable change set.
- Follow AGENTS.md conventions.

Validation:
- Run the most relevant automated tests. If none exist, note that in the task's Notes.

Task list updates:
- Mark task #58 Status as [x] only after it is completed and validated.
- If any dependency or priority ordering changes are needed, update the task list and explain in Notes.

Research:
- If any Discord/Firebase/API details are unclear, do web research (official docs first), update the design doc accordingly, then proceed.

Commit:
- If this completes a milestone (typically a Section 1.x group), run tests and commit with message: "discord: <milestone summary>".
```

## Task 59: **Check user is poll participant**
```
You are implementing task #59 from docs/discord-bot-feature-design-tasks-list.md.
Task name: **Check user is poll participant**
Priority: P0
Dependencies: #47

Design doc references:
- docs/discord-bot-feature-design-doc.md (re-read before coding)

Scope:
- Implement the task in the smallest reviewable change set.
- Follow AGENTS.md conventions.

Validation:
- Run the most relevant automated tests. If none exist, note that in the task's Notes.

Task list updates:
- Mark task #59 Status as [x] only after it is completed and validated.
- If any dependency or priority ordering changes are needed, update the task list and explain in Notes.

Research:
- If any Discord/Firebase/API details are unclear, do web research (official docs first), update the design doc accordingly, then proceed.

Commit:
- If this completes a milestone (typically a Section 1.x group), run tests and commit with message: "discord: <milestone summary>".
```

## Task 60: **Implement idempotency for interactions**
```
You are implementing task #60 from docs/discord-bot-feature-design-tasks-list.md.
Task name: **Implement idempotency for interactions**
Priority: P0
Dependencies: #49

Design doc references:
- docs/discord-bot-feature-design-doc.md (re-read before coding)

Scope:
- Implement the task in the smallest reviewable change set.
- Follow AGENTS.md conventions.

Validation:
- Run the most relevant automated tests. If none exist, note that in the task's Notes.

Task list updates:
- Mark task #60 Status as [x] only after it is completed and validated.
- If any dependency or priority ordering changes are needed, update the task list and explain in Notes.

Research:
- If any Discord/Firebase/API details are unclear, do web research (official docs first), update the design doc accordingly, then proceed.

Commit:
- If this completes a milestone (typically a Section 1.x group), run tests and commit with message: "discord: <milestone summary>".
```

## Task 61: **Handle 15-minute token expiry**
```
You are implementing task #61 from docs/discord-bot-feature-design-tasks-list.md.
Task name: **Handle 15-minute token expiry**
Priority: P0
Dependencies: #19

Design doc references:
- docs/discord-bot-feature-design-doc.md (re-read before coding)

Scope:
- Implement the task in the smallest reviewable change set.
- Follow AGENTS.md conventions.

Validation:
- Run the most relevant automated tests. If none exist, note that in the task's Notes.

Task list updates:
- Mark task #61 Status as [x] only after it is completed and validated.
- If any dependency or priority ordering changes are needed, update the task list and explain in Notes.

Research:
- If any Discord/Firebase/API details are unclear, do web research (official docs first), update the design doc accordingly, then proceed.

Commit:
- If this completes a milestone (typically a Section 1.x group), run tests and commit with message: "discord: <milestone summary>".
```

## Task 62: **Protect `discord` user fields in rules**
```
You are implementing task #62 from docs/discord-bot-feature-design-tasks-list.md.
Task name: **Protect `discord` user fields in rules**
Priority: P0
Dependencies: #28

Design doc references:
- docs/discord-bot-feature-design-doc.md (re-read before coding)

Scope:
- Implement the task in the smallest reviewable change set.
- Follow AGENTS.md conventions.

Validation:
- Run the most relevant automated tests. If none exist, note that in the task's Notes.

Task list updates:
- Mark task #62 Status as [x] only after it is completed and validated.
- If any dependency or priority ordering changes are needed, update the task list and explain in Notes.

Research:
- If any Discord/Firebase/API details are unclear, do web research (official docs first), update the design doc accordingly, then proceed.

Commit:
- If this completes a milestone (typically a Section 1.x group), run tests and commit with message: "discord: <milestone summary>".
```
